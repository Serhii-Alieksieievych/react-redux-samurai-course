{"version":3,"sources":["hoc/withAuthRedirect.jsx","components/common/CustomForms/CustomForms.jsx","utils/validators/validator.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","components/common/CustomForms/CustomForms.module.css","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","components/Login/Login.module.css","components/Login/Login.jsx"],"names":["withAuthRedirect","Component","connect","state","userId","auth","id","props","replace","to","withBackAuthRedirect","CustomField","input","meta","hasError","error","touched","className","classes","textareaWrapper","type","Input","Textarea","textarea","requiredField","value","undefined","maxLengthCreator","maxLength","length","_objectWithoutProperties","source","excluded","key","i","target","Object","getOwnPropertySymbols","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","call","module","exports","_objectWithoutPropertiesLoose","sourceKeys","keys","LoginForm","onSubmit","validate","handleSubmit","action","loginForm","name","component","placeholder","errorMessage","compose","hadErr","loginTC","useState","setErrorMessage","console","log","login","formData","then","err"],"mappings":"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","file":"static/js/7.c99add37.chunk.js","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Navigate } from \"react-router-dom\";\n\nexport const withAuthRedirect = (Component) => {\n    const mapStateToProps = (state) => ({\n        userId: state.auth.id,\n    })\n\n    return connect(mapStateToProps)((props) => {\n        if (!props.userId) return <Navigate replace to=\"/../login\" />\n        return <Component {...props} />\n    })\n}\n\nexport const withBackAuthRedirect = (Component) => {\n    const mapStateToProps = (state) => ({\n        userId: state.auth.id,\n    })\n\n    return connect(mapStateToProps)((props) => {\n        if (props.userId) return <Navigate replace to=\"/../profile/me\" />\n        return <Component {...props} />\n    })\n}","import React from \"react\";\nimport classes from \"./CustomForms.module.css\";\n\nexport const CustomField = ({ input, meta, ...props }) => {\n    const hasError = meta.error && meta.touched\n    return (\n        <div className={`${classes.textareaWrapper} ${hasError && classes.error}`}>\n            {input.type\n                ? <Input {...input} {...props} />\n                : <Textarea  {...input} {...props} />\n            }\n            <div>{hasError && <span>{meta.error}</span>}</div>\n        </div>\n    )\n}\n\nconst Textarea = (props) => (\n    <textarea {...props} className={classes.textarea}></textarea>\n)\n\nconst Input = (props) => (\n    <input {...props} className={classes.input}/>\n)"," export const requiredField = value => {\n    return value ? undefined : \"Field is required\";\n}\n\nexport const maxLengthCreator = maxLength => value => {\n    if (value) return value.length <= maxLength ? undefined : `Max lenhgth is ${maxLength}`\n    return undefined\n}\n\nexport const minLengthCreator = minLength => value => {\n    if (value) return value.length >= minLength ? undefined : `Min lenhgth is ${minLength}`\n    return undefined\n}","import objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"CustomForms_error__1i_LA\",\"textarea\":\"CustomForms_textarea__24t2G\",\"input\":\"CustomForms_input__2n7gA\"};","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__2Px22\",\"loginForm\":\"Login_loginForm__1Hg13\",\"error\":\"Login_error__17Wu6\",\"errorMessage\":\"Login_errorMessage__1EjD8\"};","import React from \"react\";\nimport { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { compose } from \"redux\";\n//import { Field, reduxForm } from \"redux-form\"; //remove\nimport { Form, Field } from 'react-final-form'\nimport { withBackAuthRedirect } from \"../../hoc/withAuthRedirect\";\nimport { loginTC } from \"../../Redux/auth-reducer\";\nimport { requiredField } from \"../../utils/validators/validator\";\nimport { CustomField } from \"../common/CustomForms/CustomForms\";\nimport classes from \"./Login.module.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\n\nconst LoginForm = (props) => {\n    return (\n        <Form\n            onSubmit={props.onSubmit}\n            validate={requiredField}\n        >\n            {({ handleSubmit, error })=>(\n                <form action=\"\" className={classes.loginForm} onSubmit={handleSubmit}>\n                    <div name=\"wrapper\" className={error && classes.error}>\n                        <Field\n                            component={CustomField}\n                            validate={requiredField}\n                            name=\"input\"\n                            type=\"text\"\n                            placeholder=\"login\"\n                        />\n                        <Field\n                            component={CustomField}\n                            validate={requiredField}\n                            name=\"password\"\n                            type=\"password\"\n                            placeholder=\"password\"\n                        />\n                        <div>\n                            <Field\n                                component=\"input\"\n                                name=\"rememberMe\"\n                                type=\"checkbox\"\n                            />\n                            <span>\n                                Запомнить меня\n                            </span>\n                        </div>\n                        <button>Log in</button>\n                        <div className={classes.errorMessage}>{error}</div>\n                    </div>\n                </form>\n            )}\n        </Form>\n    )\n}\n\n//const LoginReduxForm = reduxForm({ form: 'login' })(LoginForm)\n\nconst Login = ({ loginTC, userId, hadErr }) => {\n    const[errorMessage, setErrorMessage] = useState('')\n\n   console.log('render')\n    const onSubmit = (formData) => {\n        setErrorMessage('')\n        if (!userId)loginTC(formData).then(\n            err => {\n                setErrorMessage(err)\n            }\n        )\n    }\n    return (\n        <div className={classes.login}>\n            <h1>Login</h1>\n            <LoginForm onSubmit={onSubmit} />\n            {hadErr && <h2>{errorMessage}</h2>}\n        </div>\n    )\n}\nconst mapStateToProps = (state) => ({\n    userId: state.auth.id,\n    hadErr: state.auth.hadErr,\n})\nexport default compose(withBackAuthRedirect, connect(mapStateToProps, { loginTC }))(Login);"],"sourceRoot":""}