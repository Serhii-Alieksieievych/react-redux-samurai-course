{"version":3,"sources":["hoc/withAuthRedirect.jsx","components/common/CloseButton/CloseButton.tsx","assets/img/avatars/small_ava.jpg","components/Dialogs/DialogItem/DialogItem.module.css","components/Dialogs/Message/Message.module.css","components/Dialogs/Dialogs.module.css","components/Dialogs/CurrentDialogInfo/CurrentDialogInfo.module.css","components/Dialogs/RestoreProposition/RestoreProposition.module.css","components/Dialogs/DialogItem/DialogItem.jsx","components/Dialogs/Message/Message.jsx","components/Dialogs/CurrentDialogInfo/CurrentDialogInfo.tsx","components/Dialogs/RestoreProposition/RestoreProposition.jsx","components/Dialogs/FiltrationForm/FiltrationForm.tsx","components/Dialogs/DialogForm/DialogForm.tsx","components/Dialogs/Dialogs.jsx","Redux/dialogs-selectors.js","components/Dialogs/DialogsContainer.jsx"],"names":["withAuthRedirect","Component","connect","state","userId","auth","id","props","replace","to","withBackAuthRedirect","CloseButton","size","color","onClick","version","xmlns","x","y","width","height","viewBox","fill","points","d","module","exports","DialogItem","dialog","refreshMessages","className","classes","dialogItem","src","photos","small","smallAva","avatar","stringes","userName","newMessagesCount","Message","message","deleteMessage","currentDialog","setMessageToSpam","myMessage","notMyMessage","body","addedAt","CurrentDialogInfo","path","currentDialogInfo","alt","textInfo","lastActivity","lastUserActivityDate","RestoreProposition","restoreMessage","dialogInDeletingProgressId","FiltrationForm","getMessagesNewestThan","formik","useFormik","initialValues","year","month","day","validate","values","errors","length","onSubmit","fullDate","setSubmitting","monthes","i","push","days","handleSubmit","type","getFieldProps","touched","selected","map","value","disabled","isSubmitting","DialogForm","sendMessage","validationSchema","Yup","max","name","as","Dialogs","dialogs","messages","refreshDialogs","useEffect","dialogsLists","dialogsItems","items","getMessagesSelector","dialogsPage","getDialogsSelector","getCurrentMessageSelector","currentMessage","compose","changeMessage","changeNewMessage"],"mappings":"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","file":"static/js/7.a9437752.chunk.js","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Navigate } from \"react-router-dom\";\n\nexport const withAuthRedirect = (Component) => {\n    const mapStateToProps = (state) => ({\n        userId: state.auth.id,\n    })\n\n    return connect(mapStateToProps)((props) => {\n        if (!props.userId) return <Navigate replace to=\"/../login\" />\n        return <Component {...props} />\n    })\n}\n\nexport const withBackAuthRedirect = (Component) => {\n    const mapStateToProps = (state) => ({\n        userId: state.auth.id,\n    })\n\n    return connect(mapStateToProps)((props) => {\n        if (props.userId) return <Navigate replace to=\"/../profile/me\" />\n        return <Component {...props} />\n    })\n}","import React from \"react\";\nimport { JsxFragment } from \"typescript\";\ntype PropsType = {\n    size: string,\n    color: string,\n    onClick: ()=> void\n}\nconst CloseButton: React.FC<PropsType> = ({size=\"40px\", color='#fff', onClick}) => {\n    return(\n        <div onClick={onClick}>\n            <svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\"\n                width={size} height={size} viewBox=\"0 0 512 512\">\n                <g>\n                    <polygon\n                        fill={color}\n                        points=\"335.188,154.188 256,233.375 176.812,154.188 154.188,176.812 233.375,256\n                        154.188,335.188 176.812,357.812 256,278.625 335.188,357.812 357.812,335.188 278.625,256 357.812,176.812\"\n                    />\n                    <path\n                        fill={color}\n                        d=\"M256,0C114.609,0,0,114.609,0,256c0,141.391,114.609,256,256,256c141.391,0,256-114.609,256-256\n                            C512,114.609,397.391,0,256,0z M256,472c-119.297,0-216-96.703-216-216S136.703,40,256,40s216,96.703,216,216S375.297,472,256,472z\"\n                    />\n                </g>\n            </svg>\n        </div> \n    )\n}\n\nexport default CloseButton;","export default \"data:image/jpeg;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogItem\":\"DialogItem_dialogItem__2RuWv\",\"avatar\":\"DialogItem_avatar__12OzI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__1MOXo\",\"myMessage\":\"Message_myMessage__6CULW\",\"notMyMessage\":\"Message_notMyMessage__2x8C6\",\"viewed\":\"Message_viewed__3WLTb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__2xRSA\",\"dialogsLists\":\"Dialogs_dialogsLists__1Cvkl\",\"messages\":\"Dialogs_messages__1w_Up\",\"dialogsItems\":\"Dialogs_dialogsItems__2sNe2\",\"form\":\"Dialogs_form__1EQXf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"currentDialogInfo\":\"CurrentDialogInfo_currentDialogInfo__LNZqX\",\"avatar\":\"CurrentDialogInfo_avatar__25Ocv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"RestoreProposition_message__2FkL9\",\"myMessage\":\"RestoreProposition_myMessage__IHhMq\",\"notMyMessage\":\"RestoreProposition_notMyMessage__1QJh4\",\"viewed\":\"RestoreProposition_viewed__2N8Yp\"};","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { refreshMessages } from \"../../../Redux/dialogs-reducer\";\nimport classes from './DialogItem.module.css';\nimport smallAva from '../../../assets/img/avatars/small_ava.jpg'\n\n\nconst DialogItem = ({dialog, refreshMessages}) => {\n    const clickHandler = () => {\n        refreshMessages(dialog)\n    }\n    //const path = '/dialogs/' + dialog.id;\n    return (\n        <div className={classes.dialogItem} onClick={clickHandler}>\n            <img src={dialog.photos.small || smallAva} className={classes.avatar}/>\n            <div className={classes.stringes}>\n                {//<Link className={classes.dialogLink} to={path}>\n                    <h3>\n                        {dialog.userName}\n                    </h3>\n                /*</Link>*/}\n                <div>New messages: {dialog.newMessagesCount}</div>\n            </div>\n        </div>\n    )\n}\n\nexport default DialogItem;","import React from \"react\";\nimport CloseButton from \"../../common/CloseButton/CloseButton\";\nimport classes from './Message.module.css';\n\nconst Message = ({message, deleteMessage, currentDialog, setMessageToSpam}) => {\n    const deleteHandler = () => {\n        deleteMessage(message.id, currentDialog)\n    }\n    const setToSpamHandler = () => {\n        setMessageToSpam(message.id, currentDialog)\n    }\n    return (\n        <div\n            className={ message &&\n                `${classes.message} ${message.userId ? classes.myMessage : classes.notMyMessage}`\n            }\n        >\n                Текст: {message.body}<br />\n                Відправлено: {message.addedAt}\n                <button onClick={deleteHandler}>Delete</button>\n                <button onClick={setToSpamHandler}>To spam</button>\n        </div>\n    )\n}\n\nexport default Message;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport classes from './CurrentDialogInfo.module.css';\nimport smallAva from '../../../assets/img/avatars/small_ava.jpg'\n\ntype CurrentDialogInfoType = {\n    currentDialog: any,\n}\n\nconst CurrentDialogInfo: React.FC<CurrentDialogInfoType> = ({\n    currentDialog\n}) => {\n    const path = `../profile/${currentDialog.id}`\n    return <div className={classes.currentDialogInfo}>\n        {<Link to={path}>\n        <img src={currentDialog.photos.small || smallAva} alt=\"avatar\" className={classes.avatar} />\n    </Link>}\n    <div className={classes.textInfo}>\n        <h3 className={classes.userName}>Name: {currentDialog.userName}</h3>\n        <p className={classes.lastActivity}>Last user's activity date: {currentDialog.lastUserActivityDate}</p>\n    </div>\n    </div>\n}    \n\n\nexport default CurrentDialogInfo;","import React from \"react\";\nimport CloseButton from \"../../common/CloseButton/CloseButton\";\nimport classes from './RestoreProposition.module.css';\n\nconst RestoreProposition = ({ restoreMessage, dialogInDeletingProgressId, currentDialog}) => {\n    const restoreHandler = () => {\n        restoreMessage(dialogInDeletingProgressId, currentDialog)\n    }\n\n    return (\n        <div>\n            You can restore message\n            TIME\n            <button onClick={restoreHandler}>Restore</button>\n        </div>\n    )\n}\n\nexport default RestoreProposition;","import React from 'react';\nimport { Formik, FormikErrors, FormikValues } from 'formik';\n\nimport { useFormik } from \"formik\";\n\ninterface Values {\n    day?: string\n    month?: string\n    year?: string\n}\n\nconst FiltrationForm :React.FC<any> = ({getMessagesNewestThan, currentDialog}) => {\n    const validate = (values: Values) => {\n        const errors : FormikErrors<Values> = {};\n        if (!values.year) {\n            errors.year = 'Required';\n        } else if (values.year.length !== 4) {\n            errors.year = 'Must be 4 characters';\n        }\n        if (!values.month) {\n            errors.month = 'Required';\n        }\n        if (!values.day) {\n            errors.day = 'Required';\n        }\n        return errors;\n    }\n    \n    const formik = useFormik({\n        initialValues: {\n        year: '',\n        month: '',\n        day: ''\n    },\n    validate,\n    onSubmit: (values: Values) => {\n        const fullDate = `${values.year}-${values.month}-${values.day}`\n        getMessagesNewestThan(currentDialog.id, fullDate)\n        formik.setSubmitting(false)\n    },\n})\n    const monthes = []\n    for (let i = 1 ; i < 13; i++){\n        monthes.push(i)\n    }\n    const days = []\n    for (let i = 1; i < 32; i++) {\n        days.push(i)\n    }\n    return (\n        <form onSubmit={formik.handleSubmit}>\n            <h3>Get only messages newest than..</h3>\n            <input\n                type=\"input\"\n                {...formik.getFieldProps('year')}\n            />\n            {formik.touched.year && formik.errors.year ? <div>{formik.errors.year}</div> : null}\n            \n            <select\n                {...formik.getFieldProps('month')}\n            >\n                <option selected>Month</option>\n                {monthes.map(month => <option value={`${month}`}>{month}</option>)}\n            </select>\n            {formik.touched.month && formik.errors.month ? <div>{formik.errors.month}</div> : null}\n\n            <select\n                {...formik.getFieldProps('day')}\n            >\n                <option selected>Day</option>\n                {days.map(day => <option value={`${day}`}>{day}</option>)}\n            </select>\n            {formik.touched.day && formik.errors.day ? <div>{formik.errors.day}</div> : null}\n            <button type=\"submit\" disabled={formik.isSubmitting}>\n                Get\n            </button>\n        </form>\n    )}\n\n\n\nexport default FiltrationForm;","import React from 'react';\nimport { Formik, Field, Form, ErrorMessage, FormikProps } from 'formik';\nimport * as Yup from 'yup';\nimport { DialogType } from '../../../types/DialogsTypes';\n\ntype PropsType = {\n    sendMessage: (payload:[DialogType, string])=> void,\n    currentDialog: DialogType\n}\nconst DialogForm = ({sendMessage, currentDialog}: PropsType) => {\n    return (\n        <Formik\n            initialValues={{ message: ''}}\n            validationSchema={Yup.object({\n                message: Yup.string()\n                    .max(300, 'Must be 300 characters or less')\n            })}\n            onSubmit={(values, { setSubmitting },) => {\n                sendMessage([currentDialog,values.message])\n                values.message=''\n                setSubmitting(false)\n            }}\n        >\n            <Form>\n                <Field name=\"message\" as=\"textarea\" />\n                <ErrorMessage name=\"message\" />\n                <button type=\"submit\">Submit</button>\n            </Form>\n        </Formik>\n    );\n};\n\nexport default DialogForm","import React, { useEffect } from \"react\";\nimport DialogItem from \"./DialogItem/DialogItem\";\nimport Message from \"./Message/Message\";\nimport classes from './Dialogs.module.css';\nimport CurrentDialogInfo from \"./CurrentDialogInfo/CurrentDialogInfo\";\nimport RestoreProposition from \"./RestoreProposition/RestoreProposition\"\nimport FiltrationForm from \"./FiltrationForm/FiltrationForm\";\nimport DialogForm from \"./DialogForm/DialogForm\";\n\nconst Dialogs = ({\n    sendMessage,\n    dialogs,\n    messages,\n    refreshDialogs,\n    refreshMessages,\n    currentDialog,\n    deleteMessage,\n    setMessageToSpam,\n    dialogInDeletingProgressId,\n    restoreMessage,\n    newMessagesCount,\n    getMessagesNewestThan\n}) => {\n    useEffect(() => {\n        refreshDialogs()\n    }, [])\n    return (\n        <div className={classes.dialogs}>\n            <div className={classes.dialogsLists}>\n                <div className={classes.dialogsItems}>\n                    <h3>You have {newMessagesCount} new messages!</h3>\n                    {dialogs.map(dialog => {\n                        return <DialogItem\n                            key={dialog.id}\n                            dialog={dialog}\n                            refreshMessages={refreshMessages}\n                        />\n                    })}\n                </div>\n                <div className={classes.messages}>\n                    {currentDialog && <CurrentDialogInfo currentDialog={currentDialog} />}\n                    {currentDialog\n                        && <FiltrationForm\n                            getMessagesNewestThan={getMessagesNewestThan}\n                            currentDialog={currentDialog}\n                        />}\n                    {dialogInDeletingProgressId\n                        && <RestoreProposition\n                            restoreMessage={restoreMessage}\n                            dialogInDeletingProgressId={dialogInDeletingProgressId}\n                            currentDialog={currentDialog}\n                    />}\n                    {messages.items.map(message => <Message\n                        key={message.id}\n                        message={message}\n                        deleteMessage={deleteMessage}\n                        currentDialog={currentDialog}\n                        setMessageToSpam={setMessageToSpam}\n                    />)}\n                </div>\n            </div>\n            <DialogForm sendMessage={sendMessage} currentDialog={currentDialog}/>\n        </div>\n    )\n}\n\nexport default Dialogs;","export const getMessagesSelector = state => state.dialogsPage.messages;\nexport const getDialogsSelector = state => state.dialogsPage.dialogs;\nexport const getCurrentMessageSelector = state => state.dialogsPage.currentMessage;\n\n","import Dialogs from \"./Dialogs\";\nimport {\n    changeNewMessage,\n    deleteMessage,\n    restoreMessage,\n    refreshDialogs,\n    refreshMessages,\n    sendMessage,\n    setMessageToSpam,\n    getMessagesNewestThan\n} from \"../../Redux/dialogs-reducer\";\nimport { connect } from \"react-redux\";\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\";\nimport { compose } from \"redux\";\nimport { getCurrentMessageSelector, getDialogsSelector, getMessagesSelector } from \"../../Redux/dialogs-selectors\";\n\nconst mapStateToProps = (state) => (\n    {\n        messages: getMessagesSelector(state),\n        dialogs: getDialogsSelector(state),\n        currentMessage: getCurrentMessageSelector(state),\n        currentDialog: state.dialogsPage.currentDialog,\n        dialogInDeletingProgressId: state.dialogsPage.dialogInDeletingProgressId,\n        newMessagesCount: state.dialogsPage.newMessagesCount,\n    }\n)\n\nconst mapDispatchToProps = (dispatch) => (\n    {\n        sendMessage: (message) => {\n            dispatch(sendMessage(message));\n            //dispatch(changeNewMessage(''));\n        },\n\n        changeMessage: (text) => {\n            dispatch(changeNewMessage(text))\n        },\n\n        refreshDialogs: () => {\n            dispatch(refreshDialogs())\n        },\n\n        refreshMessages: (id) => {\n            dispatch(refreshMessages(id))\n        },\n\n        deleteMessage: (id, dialog) => {\n            dispatch(deleteMessage(id, dialog))\n        }\n    }\n)\n\nexport default compose(\n    connect(mapStateToProps, {\n        sendMessage,\n        changeMessage: changeNewMessage,\n        refreshDialogs,\n        refreshMessages,\n        deleteMessage,\n        setMessageToSpam,\n        restoreMessage,\n        getMessagesNewestThan\n    }),\n    withAuthRedirect\n)(Dialogs);\n"],"sourceRoot":""}